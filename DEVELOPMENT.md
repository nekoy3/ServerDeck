# ServerDeck 開発ガイド

## 開発環境セットアップ

### 必須要件
- Docker Desktop
- Git

### 初回セットアップ
```bash
git clone <repository-url>
cd ServerDeck
./restart_full.sh
```

## 開発ワークフロー

### 基本原則
1. **常に `./restart_full.sh` を使用**: 依存関係の変更がなくても、キャッシュ問題を避けるため
2. **ドキュメントの同期更新**: コード変更時は必ず対応するドキュメントも更新
3. **機能ごとのコミット**: 関連する変更は一つのコミットにまとめる

### 開発手順
1. 機能開発・バグ修正
2. ドキュメント更新（該当する場合）
3. `./restart_full.sh` で動作確認
4. コミット・プッシュ

### 推奨使用コマンド
```bash
# 開発中の変更適用（推奨）
./restart_full.sh

# 避けるべき（キャッシュ問題の原因）
./restart_app.sh
docker-compose restart
```

## ドキュメント更新ポリシー

### 更新が必要な場合
- 新機能追加
- 既存機能の変更
- 機能削除
- アーキテクチャ変更
- API変更
- 設定変更

### 更新対象ドキュメント
- `FRONTEND_ARCHITECTURE.md`: フロントエンド全体の構成
- `JAVASCRIPT_ARCHITECTURE.md`: JavaScript詳細アーキテクチャ
- `README.md`: プロジェクト概要・使用方法
- `DEVELOPMENT.md`: 開発ガイド（このファイル）

### 更新内容の例
- **追加**: 新機能のセクション追加、新しいメソッド・クラスの説明
- **変更**: 既存機能の動作変更、APIレスポンス形式変更
- **削除**: 廃止機能のセクション削除または「廃止」マーク

## トラブルシューティング

### よくある問題
1. **UIが正しく表示されない**
   - 解決策: `./restart_full.sh` で完全再構築

2. **JavaScript変更が反映されない**
   - 解決策: ブラウザのハードリフレッシュ + `./restart_full.sh`

3. **Docker関連エラー**
   - 解決策: `docker system prune -f` + `./restart_full.sh`

### デバッグ用エンドポイント
- `/test.html`: 基本的なHTML表示テスト
- `/debug`: システム情報表示
- `/modal-test`: モーダル機能テスト

## コード品質

### JavaScript
- モジュラー構造を維持
- 機能ごとにファイルを分離
- グローバル名前空間の使用（`window.ModuleName`）
- エラーハンドリングの実装

### Python
- Flask設計パターンに従う
- 適切なエラーハンドリング
- ログ出力の実装
- 設定ファイルのバックアップ機能

## デプロイメント

### 本番環境
```bash
git pull
./restart_full.sh
```

### 注意事項
- 設定ファイルのバックアップが自動実行される
- ダウンタイムが発生する（完全再構築のため）
- ログは標準出力に出力される
