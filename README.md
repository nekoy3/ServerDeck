# ServerDeck

サーバー管理・監視用のWebダッシュボードアプリケーション

## 🚀 機能概要

### 📊 サーバー管理・監視
- **サーバー管理**: サーバーの追加・編集・削除、タグ管理
- **高度なPing監視**: 応答時間・パケットロス率のリアルタイム表示
- **URLハイパーリンク**: URLフィールドのクリック可能リンク化・クリップボードコピー
- **SSH接続**: ブラウザ経由でのSSH端末接続
- **柔軟なSSH設定**: 古いネットワーク機器対応のカスタムSSHオプション

### 🔐 認証・セキュリティ
- **SSHキー管理**: SSH秘密鍵のアップロード・管理・一括操作
- **多様な認証方式**: パスワード・SSHキー認証対応
- **ユーザー管理**: セッション管理・ログイン制御

### 🔄 インポート・バックアップ
- **Extra Import**: 外部URLからのサーバー情報自動インポート・同期
- **バックアップ機能**: 設定の自動バックアップ・復元・履歴管理
- **一括操作**: サーバー・SSHキーの一括削除・管理

### 🎨 UI・UX
- **ダークモード**: ライト/ダークテーマ切り替え・設定保存
- **統一通知システム**: 美しい成功・エラー・警告・情報通知
- **レスポンシブ設計**: モバイル・タブレット対応UI

## 🛠 技術スタック

- **Backend**: Python 3.9, Flask, Flask-SocketIO
- **Frontend**: HTML5, Bootstrap 5, Vanilla JavaScript（完全モジュラー設計）
- **リアルタイム通信**: Socket.IO（Ping監視・通知）
- **インフラ**: Docker, Docker Compose
- **データ**: YAML設定ファイル（バックアップ機能付き）
- **アーキテクチャ**: モジュラー設計、統一API抽象化レイヤー、統一モーダル管理

## クイックスタート

### 必須要件
- Docker Desktop
- Git

### インストール・起動
```bash
git clone <repository-url>
cd ServerDeck
./restart_full.sh
```

アプリケーションは http://127.0.0.1:5001/ でアクセス可能です。

### 管理コマンド
```bash
# 完全再構築（推奨）
./restart_full.sh

# 軽量再起動（非推奨）
./restart_app.sh
```

**⚠️ 重要な運用ルール**
- **常に `./restart_full.sh` を使用してください**
- `./restart_app.sh` は開発時のみ使用し、本格運用では避けてください
- Docker環境の整合性を保つため、設定変更やコード更新後は必ず完全再構築を行ってください

## 初期設定

### ユーザー作成
```bash
python user_management.py
```

### 設定ファイル
- `config/servers.yaml`: サーバー情報
- `config/ssh_keys.yaml`: SSH鍵設定
- `config/users.yaml`: ユーザー情報
- `config/settings.yaml`: アプリケーション設定

## 開発者向け

詳細な開発ガイドは [DEVELOPMENT.md](DEVELOPMENT.md) を参照してください。

### アーキテクチャドキュメント
- [フロントエンドアーキテクチャ](FRONTEND_ARCHITECTURE.md)
- [JavaScriptアーキテクチャ](JAVASCRIPT_ARCHITECTURE.md)

### ドキュメント更新ポリシー
**重要**: コード変更時は対応するドキュメントも必ず更新してください。
- 新機能追加: セクション・詳細を追加
- 機能変更: 該当部分を更新
- 機能削除: セクション削除または「廃止」マーク
- 常に `./restart_full.sh` を使用

## トラブルシューティング

### よくある問題
1. **表示が崩れる・更新されない**
   ```bash
   ./restart_full.sh
   ```

2. **Docker関連エラー**
   ```bash
   docker system prune -f
   ./restart_full.sh
   ```

3. **ログ確認**
   ```bash
   docker logs serverdeck-app
   ```

## ライセンス

[ライセンス情報を記載]

## 最近の更新

### 🎯 最新の実装完了機能（2025年1月現在）
- ✅ **URLハイパーリンク機能**: URLフィールドのクリック可能リンク・クリップボードコピー
- ✅ **高度なPing監視**: 応答時間・パケットロス率のリアルタイム表示（Socket.IO）
- ✅ **Extra Import強化**: 外部URL自動同期・`is_extra`フラグ管理
- ✅ **JavaScript完全モジュール化**: 7つのモジュールファイルによる堅牢な設計
- ✅ **統一モーダル管理システム**: Bootstrap Modalの統一管理・エラーハンドリング
- ✅ **統一通知システム**: 美しいトースト通知・一元管理
- ✅ **API抽象化レイヤー**: `APIManager`による統一APIリクエスト処理
- ✅ **バックアップ・復元機能**: 設定の自動バックアップ・履歴管理・一括復元

### 🏗 アーキテクチャ改善
- ✅ **7つのJavaScriptモジュール**: `main.js`, `utils.js`, `ping-status.js`, `server-management.js`, `ssh-key-management.js`, `extra-import.js`, `backup-management.js`
- ✅ **イベントリスナー重複防止**: `{ once: true }`による安全なイベント管理
- ✅ **モーダルライフサイクル管理**: 統一された開閉・クリーンアップ処理
- ✅ **エラーハンドリング強化**: null チェック・DOM要素存在確認・フォールバック処理
- ✅ **設定パネルUI統一**: カードクリック無効化・編集ボタンのみ動作

### 🐛 修正済みの問題
- ✅ **SSH接続オプション**: 古いネットワーク機器対応の柔軟なSSH設定
- ✅ **HTMLテンプレート**: 構文エラー修正・重複読み込み解消
- ✅ **Dockerキャッシュ**: `restart_full.sh`による完全再構築機能
- ✅ **設定パネル動作**: モーダル重複オープン防止・適切な設定パネル復帰

### 📈 主な改善点
- より堅牢なエラーハンドリング
- モジュラーなJavaScript構造
- 統一されたユーザーエクスペリエンス
- 保守性の向上
- HTMLレンダリングエラーの解消
- フロントエンドコードの最適化

## 🚀 今後の実装予定

### 🎯 高優先度（次期実装予定）
1. **サーバーグループ機能**: サーバーをグループ分けして管理
2. **ログビューア**: SSH接続・Ping監視・操作ログの一元表示
3. **通知システム強化**: メール・Slack通知、監視アラート
4. **Webターミナル強化**: タブ機能・セッション保存・履歴管理

### 🔧 中優先度（将来実装）
5. **SFTP/SCPファイル転送**: ブラウザ経由でのファイル操作
6. **サーバー監視ダッシュボード**: CPU・メモリ・ディスク使用率表示
7. **スケジュール機能**: 定期実行コマンド・自動化タスク
8. **ユーザー権限管理**: ロール・権限ベースのアクセス制御

### 💡 アイデア段階（長期構想）
9. **プラグインシステム**: カスタム機能の動的追加
10. **API拡張**: REST API・Webhook・外部システム連携
11. **モバイルアプリ**: React Native・Flutter による専用アプリ
12. **AI支援機能**: ログ解析・異常検知・推奨設定

## 貢献

プルリクエストやイシューの報告を歓迎します。開発ガイドラインについては [DEVELOPMENT.md](DEVELOPMENT.md) を参照してください。
